<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>17.12.2022</title>
    <link rel="icon" type="image/x-icon" href="../eg_favicon.JPG">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@200;300;400;600&display=swap" rel="stylesheet"> 

    <style>
      body {
        font-family: 'Source Code Pro', monospace;
        font-size: 14px;
        color: #e2e3e7;
        background-color: #232529;
        /*
        e2e3e7
        c4c7cf
        868d9a
        696e79
        41454c
        35383f
        292c31
        232529

        31333a
        */
      }

      h1 {
        text-align: center;
      }

      h1 > a {
        color: rgb(139, 233, 253);
      }

      h1, h2, h3, h4, h5, h6 {
        color: rgb(139, 233, 253);
      }

      a{
        text-decoration: none;
      }

      a:hover {
        color: #e2e3e7;
      }

      .container {
        max-width: 800px;
      }

      .bg-script {
        color: rgb(139, 233, 253);
        background-color: #31333a;
        padding: 20px;
        border-radius: 10px;
        text-align: start;
        font-size: 15px;
        line-height: normal;
      }

    </style>
  </head>
  <body class="container">
    <div class="container mt-5">
        <h1><a href="../index.html" class="display-4">17.12.2022</a></h1>

        <h4>File Server</h4>
        <p>
            Bir dosya paylaşımı yaptığımızda, bu paylaşıma yalnızca istediğimiz kişilerin erişmesini sağlayabiliriz.
            Bunu yapabilmek için öncelikle ilgili klasörden "Inheritance" özelliğini kaldırmalıyız.
            Sonra erişmesini istemediğimiz kişileri ya da grupları "Remove" etmeliyiz.
            "Inheritance" özelliğini kaldırabilmek için; ilgili klasöre sağ tıklanır, "Security" sekmesinden "Advanced" ayarlarına girilir ve "Disable Inheritance" seçilir. Ardından yukarıdaki listeden bu paylaşım ile ilişkisini kesmek istediğimiz kişi ya da grupları seçip, "Remove" butonuna tıklayarak kaldırırız.
        </p>
        <p class="bg-script">
          > Server Manger <br>
          > File and Storage Services <br>
          > Shares <br>
          > Bu File Server'da kaç tane Share edilen klasör var ise gösterir. <br>
          > Paylaşım yaptığımız ilgili klasöre Rigth Click <br>
          > Properties <br>
          > Settings <br>
          > [+]Enable Access-Based Enumeration(ABE) 
        </p>
        <p>
          ABE'yi Enable yaptığımızda kullanıcılara paylaşım içindeki izni olmayan klasörler gösterilmez. Yani erişmesine gerek olmayan hatta görmesine dahi gerek olmayan paylaşımları bu şekilde ilgisiz kişilere göstermenin önüne geçmiş oluyoruz.
          O kullanıcıların <u>hiç bir <b>Allow Permission</b>'u olmamalıdır</u>.
          Fakat dolaylı yoldan bir gruba dahilse ve o gruptan Read vs. Permission alıyorsa eğer "ABE" bu durumda çalışamaz çünkü dolaylı yoldan Allow Permission'ları var demektir.
        <p>
            Eğer bu konu ile alakalı Sanal Makine'de bir sorun yaşıyorsak;
        </p>
        <p class="bg-script">
          > File Server <br>
          > Computer Management <br>
          > Shared Folder || Sessions <br>
          > Open Files <br>
          > Close
        </p>
        <p>
          Yukarıdaki konumda bulunan dosyalar kapatılırsa eğer Cache temizlenmiş olur ve kullanıcı tekrardan Log-on olduğunda geçerli izinler göz önünde bulundurulara Logon yapılır.
        </p>

        <h4>Disk Quota</h4>
        <p>
          Her makinenin, User'ın veya User Group'un ne kadarlık hafızalara sahip olacağı ayarlayanabilir. Peki hangi durumlarda bunu uygulamak gereklidir? Örnek verecek olursak ortak kullanılan bir makinemiz var ise ve giriş yapan her kullanıcının aynı oranda Disk Kapasitesi kullanmasını istemiyorsak, bu durumda "Disk Quota" kullanabiliriz. 
        </p>
        <p>
          Kota belirlemek aslında bir kullanıcının Disk'e belli bir kapasiteden daha fazla kopyalama yapmasını engellemektir. Bir klasör paylaşımı yapan makine otomatik olarak File Server olur ve istersek File Server'ın Disk'lerine de "Disk Quota" atanabilir. Tabiki eğer istenirse herhangi bir makinenin herhangi bir Disk'ine "Disk Quota" atanabilir, "File Server" olmak zorunda değil.
        </p>
        
        <h4>Disk Kotası nasıl verilir?</h4>
        <p>
          Disk Kotası özelliği NTFS Dosya Sisteminde çalışan bir özelliktir. <br>
        </p>
        <p class="bg-script">
          > NTFS Disk <br>
          > Rigth Click <br>
          > Properties <br>
          > Quota <br>
          > Enable Quota Management(Sadece uyarı verir.) || Deny Disk Space(Kota dolduğunda hem rapor verilir hem de artık kopya yapmaya devam edilemez.) <br>
          > Limit Disk Space to x MB(Her bir User'a kaç MB kapasite ayrılacağı yazılır.)
        </p>
        <p>
          Alttaki iki seçenek Log'ları "Enable" eder. <br>
          Admin'ler kota atanmasına rağmen bir kotaya sahip olmazlar.
        </p>

        <h4>Quota Entries</h4>
        <p>
          Tüm User'ların ne kadar yazdırdığını, limitini görebiliriz.
          Kişiye özel limit atamak için bu listeden ilgili kullanıcıya çift tıklanıp, değer girilir.
        </p>

        <hr>

        <h5>Ekstra hatırlatma notları</h5>
        <p class="bg-script">
        <b>Ekstra not 1</b> <br>
          > Server Manager <br>
          > Active Directort Users <br>
          > sirket.com <br>
          > Rigth Click <br>
          > New <br>
          > Organizational Unit <br>
          (Bu konumdan direkt olarak birimler üretilerek şirketteki departmanlarda bulunan çalışanları net bir şekilde gruplandırarak düzenli bir yapı oluşturulabilir)
        </p>

        <p class="bg-script">
        <b>Ekstra not 2</b> <br>
        > cmd <br>
        -> İlgili konuma gidilir, örneğin; <br>
        > cd desktop <br>
        > fsutil file createnew textfile.txt 1024000
        </p>
        <p>
          Yukarıdaki komut ile 1 MB yer kaplayan "textfile" isimde ".txt" formatında bir dosya üretilir.
          Bu tarz dosyaları gerçek bir veri kopyalamadan test etmek için kullanabilirsin.
        </p>

        <hr>

        <p>
          Yukarıda bahsettiklerimiz direkt olarak Disk'e verilen kotalardı. Aslında sadece klasörlere de kota atanabilir.
          Doğal olarak Disk'in kapasitesi o klasör için maksimum kapasiteyi belirler.
          Disk'in kapasitesinden daha az bir kapasite belirleyeceksek o klasör için kota verilebilir.
          Klasörlere kapasite verebildiğimiz gibi aynı zamanda içerisine kopyalanacak olan dosyaların da uzantılarını sınırlandırabiliriz. <br>
          Örneğin paylaşılan klasöre belli bir "Group" ya da "User'ın" o klasöre ".mp4" tipinde dosya kopyalamasını engelleyebiliriz.
          Bunu yapabilmek için Server'a <b>Feauture</b> yüklemek gerekiyor.
        </p>
        <p class="bg-script">
          > Server Manager <br>
          > Add Roles and Features <br>
          > Select Server Roles <br>
          > File and Storage <br>
          > File and iSCSI Server <br> 
          > [+]File Server Resource Manager(FSRM) -> Enable yaptığımızda artık File Uzantılarına kısıtlama getirmemize imkan vermiş olur.
        </p>
        <p>
          Eğer Disk'te Kota var ise bunu yapmak mümkün değildir, kotayı kaldırdıktan sonra bu işlem yapılır.
        </p>
        <p>
          Yükleme tamamlandıktan sonra;
        </p>
        <p class="bg-script">
          > Tools <br>
          > File Server Resource Manager <br>
          > Quota Management <br>
          > Quota Templates <br>
          > (Örneğin) 10 GB Limit <br>
          > Double Click <br>
          > Hard Quota || Soft Quota <br>
          Diretk Quota bağlamak, kopyalama yapmadan oluşturmak için herhangi birine sağ tıklayıp "Create Quota from Template".
        </p>
        <p>
          Kopya oluşturmak için;
        </p>
        <p class="bg-script">
          > Herhangi birine sağ tıkla <br>
          > Name gir <br>
          > Space Limit = 50.000(Örneğin) <br>
          > OK <br>
          > [+]Do not apply template to derived Quotes -> Enable
        </p>
        <p>
          Sıfırdan bir kota oluşturmak için;
        </p>
        <p class="bg-script">
          > Quotes <br>
          > Right <br>
          > Click <br>
          > Create Quote <br>
          > Browse(Kota yapılacak klasör seçilir) <br>
          > [+]Auto Apply Template -> Enable(Kota uyguladığımız klasörlerin de alt klasörlerine kota uygular) <br>
          > [+]Derive Properties from This Quota Template(Recommented)(Klasöre erişebilen her bir User için örneğin 50'şer MB'lık kota oluşur)
        </p>

        <hr>

        <h4>Dosya uzantılarına göre kısıtlama</h4>
        <p><b>Dosya tipi kısıtlamasında dosyaları kopyalamayı engelleme yaklaşımı;</b></p>
        <p>İzinler genel olarak ana klasörlere değil, alt klasörlere verilirler.</p> 
        <p class="bg-script">
          > Server Manager <br>
          > File Server Resource Manager(FSRM) <br>
          > File Screening Management <br>
          > File Screen Templates
        </p>
        <p>
          Yukarıdaki yolda ilişkilendireceğimiz klasörün içerisine dosya tipini kısıtlayabileceğimiz hazır "File Screen Templates"ler vardır.
        </p>
        <p>İstersek "File Screen Templates'e" sağ tıklayıp "Create File Screen Template" ile yeni "Block"lar oluşturabiliriz.</p>
        <p>
          Yukarıdaki gibi ürettiğimiz <b>File Screen Template</b>'e çift tıklayarak içeriğine erişebiliriz. <br>
          Bu noktada "<b>Settings</b>" sekmesinde karşımıza iki tane seçenek çıkar. <br>
          İlki "<b>Active screening</b>", ikincisi ise "<b>Passive screening</b>". <br><br>
          "<b>Active screening</b>": Direkt yasaklar. <br>
          "<b>Passive screening</b>": Kaydetmesini sağlar fakat bir uyarı mesajı üretir. <br>
          Mesaj Block'ladığımız içeriğin klasöre kopyalandığını belirtir ve Admin'e ait bir mail'e gönderilir. <br>
        </p>
        <p class="bg-script">
          > File Screens <br>
          > Right Click <br>
          > Create File Screen <br>
          > Browse(Yasağın uygulanacağı klasör seçilir) <br>
          > File Screen Template(Ürettiğimiz kopya veya sıfırdan oluşturduğum Template seçilir) <br>
          > Create</p>
        <p>
          Bu noktadan sonra artık seçtiğimiz klasöre yasak uygulamış olduk. <br>
          Eğer "Active screening" seçeneğini seçtiysek bu durumda <u>yasakladığımız tipte</u> bir dosya bu klasöre kopyalanamaz.
        </p>
        <p><b>Sadece ".x" türünden bir dosya kopyalanabilsin yaklaşımı;</b></p>
        <p class="bg-script">
          > File Screen Templates <br>
          > Right Click <br>
          > Create File Screen Template <br>
          > Template Name, Active, Create <br>
          > File Group Name, Files include: "."(Önce her şeyi yasaklıyoruz) <br>
          > Files exclude: "*.txt"(.txt hariç)
        </p>
        <p>
          Yukarıdaki işlemden sonra aşağıdaki yoldan ilişkilendiriyoruz; <br>
        </p>
        <p class="bg-script">
          > File Screens <br>
          > Right Click <br>
          > Create File Screen <br>
          > Browse(İlgili klasör), Derive Properties(Sadece text dosyaları) <br>
          > Create
        </p>
        <p class="bg-script">
          > Storage Reports Management <br>
          > Schedule a New Report Task <br>
          > Generate Reports Now -> Anlık rapor verir. <br>
          > Storage Reports task Properties <br>
          > Report Name <br>
          > Report Data -> Seçilir <br>
          > Scope -> Hepsi[+]
        </p>
        <p class="bg-script">
          > File Server Resource Manager <br>
          > Right Click <br>
          > Configure Options <br>
          > SMTP Server name or IP Address -> Raporlama maillerinin atılacağı mail adresi. <br>
          Bunu yazmadığımız sürece mail alamayız.
        </p>

        <hr>

        <h4>Yer kazanmak için yapılabilecek şeyler</h4>
        <p>
          Sıklıkla kullanılan dosyalarla arşiv olarak tutulacak klasörlerin konumlandırılması önemlidir. <br>
          Arşiv bilgiler başka bir konumda yani Disk'te tutulabilir fakat bunu yapmak yerine "Compress" de yapılabilirler. <br>
          Verileri "Compress" etmek, konumlarını değiştirmemek ve oldukları yerde daha az yer kaplamalarını sağlamak demektir. <br>
        </p>

        <h5>Compress yapmak</h5>
        <p>
          Disk'teki tekrar eden küçük hacimleri birleştirir. <br>
          Dosyalar, RAM'e yüklenebilmeleri için Uncompress edilmelidir. <br>
          Compress'lenmiş dosylar açılmazlar. <br>
          Direkt C'yi Compress'lersek Windows dosyaları da Compress'lenir. <br>
          Buna, içerisinde o anda "Execute" edilmiş durumda olan dosyalar olduğu için izin vermez fakat yapılabilecek olsaydı bu durumda Windows'un çökmesine sebep olurdu. <br>
          Dolayısıya "Compress" işlemini spesifik olarak belli başlı dosyalara uygulamak gereklidir. <br>
        </p>
        <p>
          Text dosyaları ya da text bazlı dosyalar oldukça fazla Compress'lenebilirler. <br>
          Ancak bazı tipledeki dosyalar kendiliğinden aslında Compress'li gibi çalışırlar dolayısıyla onları Compress'lemek pek bir işe yaramaz. <br>
          Örneğin .mp4 aslında bir sıkıştırma formatıdır, .mp4 zaten sıkıştırılmış bir dosya olduğu için tekrar Compress yapılamaz. <br>
          Sürekli kullanılan ve işletim sisteminin bulunduğu dosyaları sıkıştırmamalıyız. <br>
          Arşiv dosyalarını sıkıştırmak mantıklıdır. <br>
          Compress işlemi NTFS File Type'a sahip Disk'lerin bir özelliğidir. <br>
          Sadece Driver, Folder ya da File Compress edilebilir.
        </p>
        <p class="bg-script">
          > Disk <br>
          > Right Click <br>
          > General <br>
          > Compress this drive to save disk space <br>
        </p>
        <p class="bg-script">
          > Folder <br>
          > Right Click <br>
          > General <br>
          > Advance <br>
          > Compress this drive to save disk space, Subfolder'ları da dahil edebilir. <br>
        </p>
        <p class="bg-script">
          > File <br>
          > Right Click <br>
          > General <br>
          > Advance <br>
          > Compress this drive to save disk space
        </p>

        <h4>Veri Güvenliği</h4>
        <p>
          Disk'leri yazılımsal olarak korumaktan ziyade burada bahsedeceğimiz veri güvenliği, fiziksel olarak direkt Disk'in çalınması üzerine olacak. <br>
          Disk çalınsa bile o disk'in başka bir cihaza bağlandığında verilere erişimini imkansız hale getirmek mümkündür. <br>
          Bunu mümkün hale getiren teknolojiye "Bit Locker" adıverilir. <br>
          Bu teknoloji hem "Client" hem de "Server'larda" kullanılabilir. <br>
          Bit Locker, Disk'teki verileri kriptolar. Anakartın üzerinde TPM adında bir Chip vardır. Bu anakarta lehimli bir parçadır. Bit Locker açıldığında diski kriptolarken TPM çipindeki Unique verileri baz alarak kriptolar. Eğer BitLocker uyguladıysak PC'yi çalıştırdığımızda TPM kriptosunu çözerek makine başlatılır. Eğer makinenin üzerindeki anakart eski tip bir anakart ise üzerinde TPM Chip bulunmaz. Bu durumda bile aslında Bit Locker uygulamak mümkündür. TPM olmadığı için Bit Locker uyguladığımızda bir şifre üretmemizi sağlar. Bu şifreyi unutmamıza karşın bir önem için başka bir şifre daha üretir. TPM olan makinede paraloya ihtiyaç yoktur. Üzerinde TPM olan bir anakartta bulunan diske Bit Locker uygulanırsa ancak ve ancak o disk sadece bu diske bağlandığında kullanılabilir anlamına gelir.
        </p>
        <p>
          Hyper-V'de TPM yoktur. Server İşletim Sistem'lerinde bu Feature yüklü değildir. <br>
          BitLocker'ın çalışabilmesi için bu özelliğini aşağıdaki konumdan yüklüyoruz;
        </p>
        <p class="bg-script">
          > Server Manager <br>
          > Add Feature <br>
          > Features <br>
          > [+]BitLocker Drive Encryption
        </p>
        <p>
          Yükledikten sonra sistem otomatik olarak "Restart" yapmazsa bile yine de bizim "Restart" yapmamız gerekir. Yeniden başladıktan sonra yükleme devam eder. Özelliği yüklemiş olmamıza rağmen TPM olmadığı için BitLocker Manager'dan özelliği aktif edemeyiz. Bunu çözmek için "Microsoft Console" ayarlarına erişmek gerekiyor. Bunu yapabilmek için; <br>
        </p>
        <p class="bg-script">
          > Run <br>
          > gpedit.msc <br>
          >  Local Group Policy Editor <br>
          > Local Computer Policy <br>
          > Computer Configuration <br>
          > Administrative Templates <br>
          > Windows Components <br>
          > BitLocker Drive Encryption <br>
          > Operating System Drives <br>
          > Require additional autheentication at startup <br>
          > Double Click <br>
          > Enable <br>
          > [+]Allow BitLocker without a compatible TPM.
        </p>
        <p>
          Bu noktadan itibaren TPM'i bulunmayan makineye de BitLocker yapılabilir durumda olur. Manage BitLocker'a gidilip direkt bir Flash Disk'i anahtar olarak kullanmazı ya da bir Şifre oluşturmamızı ister. <br>
          Şifre girdikten sonra bir de "Recovery Key" oluşturulur. Bu "Recovery Key" çok önemli bir anahtırdır çünkü kriptoyu yalnızca bu anahtar çözebilir, dolayısıyla bize bu anahtarı nerede saklamak istediğimizi sorar. <br>
          Aynı şekilde yine bir USB Flash Drive'a veya bir File olarak ya da direkt yazıcıdan yazdırarak yedekleyebiliriz. File olarak yazdırma seçeneği de tabiki başka bir Disk'e yazılır, yani ikinci bir Disk'e ihtiyacımız vardır. <br>
          Daha  sonra "New Encrpto Mode" aktif edilir. <br>
          Aktif edilebilmesi için en eski Windows 10 bir "Client" işletim sistemine ihtiyaç vardır. <br>
          Hatta 1511 versiyon numaralı Windows 10 olmalıdır. <br>
          Diğer bir seçenek ise "Compatible Mode" başka bir sürüm Windows'umuz var ise kullanacağımız seçenektir. Yani Windows 7 vs gibi çok dahah eski sürümler için geçerlidir. Sonunda "Run BitLocker System Check" seçeneğini de aktif ederek süreci başlatmış oluruz. <br>
          Bu sürecin uzunluğu diskin boyutuna göre değişebilir. Bu süreç tamamlanana kadar disk hala güvende sayılmaz. Sürecin tamamlandığını "BitLocker On" durumunu gördüğümüzde anlarız. Süreç tamamlandığında makine her çalıştırıldığında daha önceden bizim atadığımız şifreyi sorar, o şifreyi girerek diski kullanmaya başlayabiliriz.
        </p>
        
        <div class="m-5 text-center">
          <a href="11-12-2022.html" class="bg-script m-5">11.12.2022</a>
          <a href="18-12-2022.html" class="bg-script m-5">18.12.2022</a>
        </div>
        <div class="mt-4"></div>
    </div>

    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>
</html>