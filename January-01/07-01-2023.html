<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>07.01.2022</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'EB Garamond', serif;
        font-size: 18px;
      }

      .container {
        max-width: 720px;
      }

    </style>
  </head>
  <body class="container">
    <div class="container mt-5">
        <h1 class="display-4">07.01.2022</h1>
        <p>
            Password normal şartlarda her makinede 42 günlük ömre sahiptir, bu sürenin sonunda değiştirilmesi istenir.<br>
            Group Policy > Domains > company.com > Default Domain Policy > Right Click > Edit > Computer Configuration > Policies > Windows Settings > Security Settings > Account Policy > Password'lar ile ilgili bilgiler bu kısımda bulunur. Group Policy konusu ayrı olarak işlenecektir.
        </p>
        <p>
            Server Manager > DNS > DC > Forward Lookup Zones > company.com -> Bu konumda DC'nin IP'sini doğrula. <br>
            (Same as parent folder) -> Eski IP'leri sil.
        </p>
        <p>
            Yukarıdaki işlemleri dersin başında yaptık. IP'leri Reset'leyerek işlenecek konuya hazırlık yapmış olduk. <br>
            Ayrıca tüm sanal makineler üzerinde sadece bir tane Ethernet kartı bulunduruldu ve bu kartta External Switch'e bağlandı.
        </p>

        <h4>Name Resolution(İsim Çözümlemesi)</h4>
        <p>
            Network'teki sorunların çoğu buradaki bilgi eksikliğinden kaynaklanır. İsim = Cihazlara verilen isimdir. <br>
            İki çeşit isimlendirme vardır. <br>
            1 FQDN, 2 NetBIOS Name. <br>
            server1.company.com -> FQDN(Full Qualified Domain Name) <br>
            server1(ilk noktaya kadar) -> Hostname <br>
            company.com -> DNS Suffix -> İlk noktadan sonraki tüm kısımdır.
        </p>
        <p>
            NetBIOS Name -> server1(Sadece bu şekilde yazar) <br>
            makine Work Group'ta ise NetBIOS Name tercih edilir. <br>
            Domain üyesi değilse FQDN'i zaten olmaz. <br>
            Üye olduğu anda FQDN kaydı oluşur ve iki çeşit isme de aynı anda sahip olabilir. <br>
            Ancak ona kullanabileceği bir DNS Suffix söyleyebiliriz. <br>
            DNS Suffix'i olmasa bile DNS Suffix girebiliriz. <br>
            Bunu söylemenin yöntemlerinden birisi DNS'tir.
        </p>
        <p>
            Name > IP -> isimden IP'ye çözümleme isim çözümlemesidir. > MAC Adresine dönüştürülür. -> Ethernet kartı. IP'den MAC Adresine dönüşüm ise ARP'dir. <br>
            İletişimin temelinde ARP yatar. <br>
            arp -a -> Örneğin DC > cmd > arp -a -> Gateway'den başlar daha önceden iletişimde olduğu tüm IP'leri, MAC adreslerini yazar.
        </p>
        <p>
            Vlan kullanmanın sebeplerinden birisi Broadcast Domain'i küçültmektir.
        </p>
        <p>
            pint server-2 -> İsim çözümlesini tetikler <br>
            Arkasına Suffix yazmadığımız için bunu NetBIOS Name olarak algılar. <br>
            Enter > FQDN'e çevirir. <br>
            FQDN ile bulduğu IP'ye Ping atar.
        </p>
        <p>
            Herhangi bir makine DNS Suffix'i nasıl öğrenir? <br>
            Bunu makineye nasıl söyleriz? <br>
            1) Makineyi Work Group'tan çıkarıp Domain'e üye edersek hangi Suffix'i kullancağını otomatik olarak öğrenir. <br>
            2) Makineyi Domain'e katmadan Suffix kullanmasını istersek DHCP > Scope Options'tan DNS Suffix söylenebilir. <br>
            3) Makineyi Domain'e üye etmeden; Server Manager > Local > Domain > Computer Name > Change > Work Group -> More > Primary DNS Suffix -> Buraya ne yazarsak kullanması gerektiği yerde otomatik olarak bu DNS Suffix'i kullanır. Buradan yaparsak artık sadece bunu kullanır. <br>
            4) Makinenin Ethernet'i > Properties > Advance > DNS > DNS Suffix for this connect -> Buraya yazacağımız herhangi bir SUffix'i, DNS Suffix olarak kullanmaya bağlar. |+|Append Primary seçili olduğunda 3.aşama çalışabilir.
        </p>

        <h4>Host Name Resolution Process</h4>
        <p>
            Önce aranan hehdef isim kendisi mi diye kontrol eder. <br>
            Client'ler öğrendikleri bilgileri önbellekte belli bir süre tutarlar. -> Host Name, Cache'te daha aönceden çözümlediği isimleri tutar.(Daha doğrusu isim çözümlemelerini tutar) <br>
            Görmek için cmd > ipconfig /displaydns -> Var ise listelenir. <br>
            Bu bilgi saniyelerle sınırlıdır. Kısa bir süre önce çözümlediği için. -> 1200 saniye yani 20 dakika boyunda hep o adresse gidilir, o adres o süre içerisinde değiştirilse bile. <br>
            Cache'e güvenmiyorsak -> Yani IP'nin değiştiğini düşünüyorsak, manuel olarak hafızayı sileriz. -> ipconfig /flushdns -> Komutu yazdığınız makinenin Host Name Cache'i temizler. <br>
            Cache'de boş ise 4.aşamaya geçer. <br>
            4.Aşama; Hosts File'a bakar. -> Yani aradığı makine kendisi değil ve daha önceden o isme çözümleme yapılmamış ise Hosts Name'e bakar. <br>
            Her Windows makine için Hosts Name dosyası aynı yerdedir; <br>
            C \ Windows \ System32 \ Drivers \ etc \ hosts <br>
            Bu dosyanın, dosya uzantısı yoktur! <br>
            Host'a müdahale edebilmek için; notepad ile açılır. <br>
            Default'ta Host dosyasının içi boştur. -> Bu dosya silinirse işletim sistemi Reset'lendiğinde yeniden yüklenir. <br>
            Hosts dosyasının içine örneğin; 1.2.3.4 örnek1.örnek.com şeklinde çözümleme yaptıracak bilgiyi girebiliriz. <br>
            Eğer Cache boş ise buradan isim çözümlemesini yapar. <br>
            Hosts File'ın içine bir kayıt edersek bize sormadan bunu Host Name Cache'e alır ve süresiz bir şekilde arada tutar. Bu bilgi Cache'ten silinemez sadece Host File'dan silinebilir. <br>
            127.0.0.1 www.youtube.com -> Bu bilgiyi Hosts File'a girersek; FQDN girmiş oluruz. youtube.com'un içindeki www makinesine çözümleme yapar. 127.0.0.1 girdiğimiz için de çözümleme yapan makine youtube olmadığı için artık youtube erişilemez durumda olur.  <br>
            5.aşama DNS Server'dır. <br>
            IP bulunamazsa isimle, IP eşleşmezse böyle bir çözümleme yapamadığı için, böyle bir makine olmadığı için bunu belirten bir Respon verir. Ağdaki otorite gibi bir şeydir. -> Kendi kapsamında, Network'ünde. DNS Server'daki isim çözümleme bilmiyorsa bunu söylemek üzerinedir. Cevap Host File olarak gelir eğer varsa. <br>
            Bu aşamadan sonra NetBIOS  Name olarak gelir. -> Eğer çözümleme DNS Server'da da yapılamıyorsa. <br>
        </p>
        <p>
            Soruyu soran makine herhangi bir DNS Suffix biliyorsa, sorgunun ortasına ekler.(Sadece NetBIOS girdiysek) sotguyu Host Name'e çevirir. Bu şekilde soruyu sorar. -> Makine(NetBIOS Name), aşamalardan herhangi birinde yok ise çözümleme başarısız olur. <br>
            5.aşamada yani DNS Server'da 2 çeşit Autheritive Responds üretilir. <br>
            "IP adresi şudur" ya da "böyle bir makine yoktur" şeklindedir. <br>
            Her iki Respond'ta çözümleme yapıldıktan sonra alınır. <br>
            Eğer çözümleme yapılamadıysa; 6.aşamadan devam edilir. <br>
            6.aşama NetBIOS Name Cache'tir. <br>
            NetBIOS Name Cache bir tablodur. -> cmd > nbtstat -c <br>
            Respond'un arkasında DNS Suffix yok ise bu bir NetBIOS Name'dir. <br>
            Örneğin; pc01 [192.168.4.44] <br>
            NetBIOS Name -> Maksimuum 16 karakter olabilir. 16. karaktere bir şey yazamayız. O karakteri NetBIOS Name oluşturan servis kullanır. Dolayısıyla biz 15 karakter kullanabiliriz. <br>
            Örneğin Benimgüzelbilgisayarım12 ve Benimgüzelbilgisayarım13 adında iki NetBIOS Name üretirsek bu makinelerin isimleri aslında Unique olmazlar. Çünkü ilk 15 karakterleri birebir aynıdır. Bu sebeple isim çakışması olur. Bu tarz isimler verilmemelidir. <br>
            NetBIOS Name Cache ayrı bir dosya olarak tutulur. Hast Name Cache ile ayrıdır. <br>
            NetBIOS Name Cache'i silmek -> nbtstat -R <br>
            6.aşamadan da yanıt gelmezse; <br>
            7.aşama yani WINS Server'a başvurulur. NetBIOS Name'leri otoamtik olarak öğrenebilen ve NetBIOS sorgularına yanıt verebilen servistir. WINS Server'un geliştiricisi Microsoft'tur. <br>
            Aynı şekilde DNS Server da Host Name'leri otomatik olarak öğrenebilen ve Host Name sorgularına yanıt verebilen bir servistir.
        </p>
        <p>
            WINS'ten cevap gelmez ya da ortamda yok ise; <br>
            8.aşama yani NetBIOS Name Broadcast yapılır. -> Network'e bağırır. -> Aradığımız ne ise o Broadcast Domain'ine kadar sorgular ve bir makine sorguyu alırsa çözülür.
        </p>
        <p>
            Broadcast ile de yanıt gelmezse; 9.aşama yani LMHOST File'a bakılır. Hosts File ile aynı konumda LMHOST'un Sample'ı yer alır. Bu dosyanın da bir uzantısı yoktur. İçerisine girip bilgiler eklendikten sonra uzantılı bir şekilde kaydedersek çalışmaz. <br>
            Kayıtlar; 192.168.2.40 ornek şeklinde yapılır. <br>
            Host Name File'dan bir giriş olduğunu anlamak için; <br>
            Host Name Cache silinir, silinmeyen hayıt var ise Host Name'den giriş olmuş demektir.
        </p>

        
        <a href=""></a>
        <div class="mt-4"></div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>
</html>